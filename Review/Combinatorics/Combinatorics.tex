\chapter{组合数学}
\minitoc
\input{Combinatorics/Catalan}
\input{Combinatorics/Stirling}
\input{Combinatorics/Lucas}
\input{Combinatorics/Permutation}
\section{其它公式与定理}
\subsection{常用公式}
\begin{theorem}
    \begin{displaymath}
        \sum_{i=0}^n\binomial{i}{k}=\binomial{n+1}{k+1}
    \end{displaymath}
\end{theorem}
\begin{itemize}
    \item 证明：将等式加上$\binomial{0}{k+1}=0$，左边不断合并即为右式。
    \item 证明：将右式不断展开即为左式。
    \item 理解：在$n+1$个中选$k+1$个点，第$k+1$个点为哨兵，剩下$k$个在它之前
    的元素中选择。
\end{itemize}
\begin{theorem}
    \begin{displaymath}
        \sum_{i=0}^n{\binomial{n}{i}i}=n2^{n-1}
    \end{displaymath}
\end{theorem}
\begin{theorem}
    \begin{displaymath}
        \int_0^1{\binomial{n}{k}x^k(1-x)^{n-k}\ud x}=\frac{1}{n+1}
    \end{displaymath}
\end{theorem}
\begin{theorem}
    \begin{displaymath}
        (-1+1)^n=\sum_{k=0}^n{(-1)^k\binomial{n}{k}}=[n=0]
    \end{displaymath}
\end{theorem}
更一般地，可以得到
\begin{theorem}
    \begin{displaymath}\label{BSum}
        \sum_{k=0}^m{(-1)^k\binomial{n}{k}}=\binomial{m-n}{m}
    \end{displaymath}
\end{theorem}
证明：
\begin{lemma}[上指标反转]\label{BSL}
    \begin{displaymath}
        \binomial{n}{m}=(-1)^m\binomial{m-n-1}{m}
    \end{displaymath}
\end{lemma}
将组合数的分子取反可证。
由于$(-1)^i=(-1)^{-i}$，该式也可表述为
\begin{inference}
    \begin{displaymath}
        (-1)^m\binomial{n}{m}=\binomial{m-n-1}{m}
    \end{displaymath}
\end{inference}
接下来证明定理：
\begin{eqnarray*}
    \sum_{k=0}^m{(-1)^k\binomial{n}{k}}&=&
    \sum_{k=0}^m{\binomial{k-n-1}{k}}\\
    &=&\binomial{m-n}{m} \textrm{(展开后不断合并最左边两项))}
\end{eqnarray*}
\subsection{Raney引理}
\index{R!Raney Lemma}
\begin{lemma}[Raney Lemma]
	设整数序列为$A_1,A_2,\cdots,A_n$，记前缀和$S_k=\displaystyle \sum_{i=1}^k{A_k}$，
	满足$S_n=1$。则在该序列的循环表示中，有且只有一个序列满足所有前缀和均大于0。
    任何一种循环表示都和自身不同。
\end{lemma}
证明留坑待补。
\index{*TODO!Raney引理证明}

\paragraph{例题} SP9507 MARIO2 - Mario and Mushrooms

可将循环同构的序列归类，根据Raney引理，每类序列只有1个序列满足题意。

\lstinputlisting{Source/Source/Count/SP9507.cpp}

上述内容参考了兔子大天使的博客\footnote{
	Raney引理
	\url{https://blog.csdn.net/duxingstar/article/details/6406022}
}。
